extends ../../layouts/layout

block content
	h1= title
	hr

	
	script( type="text/template", id="dockletRowTemplate").
		<tr>
			<td> <%= index %> </td>
			<td> <%= title  %> </td>
			<td> <%= host  %> </td>
			<td> <%= port  %> </td>
			<td> <img src="/images/refreshing_x24.gif", alt="loading..." /> </td>
			<td> <img src="/images/refreshing_x24.gif", alt="loading..." /> </td>
			<td> <img src="/images/refreshing_x24.gif", alt="loading..." /> </td>
			<td>
				<a href="#"   class="label label-primary action-refresh" docker-id="<%= id %>" >
					<span class="glyphicon glyphicon-refresh"  data-toggle="tooltip" data-placement="bottom" title="Refresh"> </span>
				</a> &nbsp;
				<a href="#"  class="label label-success action-explore" docker-id="<%= id %>" >
					<span class="glyphicon glyphicon-eye-open"> </span>
				</a> &nbsp;
				<a href="#" class="label label-danger action-delete" docker-id="<%= id %>" >
					<span class="glyphicon glyphicon-remove"> </span>
				</a>
			</td>
		</tr>


	script( type="text/template", id="imageTableTemplate").
		<div class="panel panel-default" >
			<div class="panel-heading" >
				<span class="glyphicon glyphicon-list-alt"> </span>
				&nbsp; Images List 
			</div>
			<div class="panel-body table-responsive">
				<table class="table table-striped table-borderedf imageTable">
					<thead>
						<tr>
							<th> # </th>
							<th> ID  </th>
							<th> RepoTags  </th>
							<th> Created  </th>
							<th> Size  </th>
							<th> Virtual Size  </th>
						</tr>
					</thead>
					<tbody>
						<% _.each( images, function(image,index){ %>
							<tr>
								<td> <%= index + 1 %> </td>
								<td> <a href="javascritp:void(0);" ><span class="label label-primary"><%= image.Id.substring(0, 14) %> </span> </a>  </td>
								<td> <%= image.RepoTags %> </td>
								<td> <%= image.Created %>  </td>
								<td> <%= image.Size %> </td>
								<td> <%= image.VirtualSize %>  </td>
							</tr>
						<% }) %>

					</tbody>
			</table>
			</div>
		</div>

	script( type="text/template", id="explorePanelTemplate")
		div(class="page-header", id!="<%='panel_'+ id %>" )
			h4.alert.alert-info
				|<%= title %> (<%= host %>:<%=port%>)
				span(class="badge pull-right") 
					|v<%= Version %>

			hr
			div
			.col-md-8.form-inline
				label  Monitor Docker Events  
				input.form-control.datepicker(type='textbox')
				input.form-control.timepicker(type='textbox', size="10")
				a#dockerEvents(href='#', docker-id!="<%= id %>")
					span(class="glyphicon glyphicon-circle-arrow-right")
			.col-md-4
				.count.pull-right
					span <%= Containers %>
					| Container
				.count.pull-right
					span  <%= Images %>
					| Images
			.clearfix
			<%= imagesTable %>



	script( type="text/template", id="inspectImageTemplate").
		<div class="panel"> 
			<table class="table table-striped table-bordered">
				<thead>
					<tr>
						<th> <%=  %> </th>


	script( type="text/template", id="floatingWindowTemplate")
		div( class="panel panel-primary floatingWindow" )
			div.panel-heading
				h4.panel-title <%= title %>
					button( class="pull-right glyphicon glyphicon-remove closeFloatingWindow" aria-hidden="true" style="color: rgb(73, 68, 68);")  
					button( class="glyphicon glyphicon-minus pull-right minFloatingWindow" aria-hidden="true" style="color: rgb(73, 68, 68);" )
			div.panel-body
				div.outputWindow


	div(class="panel panel-default")
		div( class="panel-heading ") 
			span(class="glyphicon glyphicon-list-alt")
			|&nbsp; Docklet List
		div.panel-body.table-responsive
			if docklets.length !== 0
				table(class="table table-striped table-bordered", id="dockletsTable")
					thead
						tr
							th #
							th name
							th host
							th port
							th Images
							th containers
							th Memory Limit
							th
								a(href="#" , class="label label-primary") 
										span(class="glyphicon glyphicon-refresh") 
								|&nbsp; 
								a(href="#docklets/new", id="newDocklet",  class="label label-primary")
										span(class="glyphicon glyphicon-plus") 
					tbody
						-each docklet, index in docklets
							tr 
								td
									= index+1
								td
									= docklet.title
								td
									= docklet.host
								td
									= docklet.port
								td
									img(src="/images/refreshing_x24.gif", alt="loading..." )
								td
									img(src="/images/refreshing_x24.gif", alt="loading..." )
								td
									img(src="/images/refreshing_x24.gif", alt="loading..." )
								td
									a(href="#" , class="label label-primary action-refresh", docker-id="#{docklet.id}")
										span(class="glyphicon glyphicon-refresh", data-toggle="tooltip", data-placement="bottom", title="Refresh") 
									|&nbsp;
									a(href="#" , class="label label-success action-explore", docker-id="#{docklet.id}")
										span(class="glyphicon glyphicon-eye-open") 
									|&nbsp;
									a(href="#", class="label label-danger action-delete", docker-id="#{docklet.id}")
										span(class="glyphicon glyphicon-remove")
						tfooter
			else
				div.alert.alert-info.text-center
					|No docklet added yet. 
					a(href="#docklets/new", id="newDocklet", class="btn btn-info	") Add new docklet
	


	div(class="container-fluid" id="dynDataPlaceholder")


	div.floatingWindowsWrapper
		.floatingWindowList

	div( class="panel panel-primary floatingWindow" id="dockerEventWindow")
		div.panel-heading
			h4.panel-title Docker Event
				button( class="glyphicon glyphicon-minus pull-right minFloatingWindow" aria-hidden="true" style="color: rgb(73, 68, 68);" )
		div.panel-body.hidden
			div.outputWindow


	.modal.fade#docklets_new
		.modal-dialog
			.modal-content
				div( class="alert  alert-dismissable hidden ", id="actionStatus")
					button(type="button", class="close", data-dismiss="alert", aria-hidden="true") &times; 

				form( id="newDockletForm", method="POST" , action="#docklets/create", role="form")

					.modal-header
						button.close(type='button', data-dismiss='modal', aria-hidden='true') Ã—
						h4.modal-title Add new docklet host
					.modal-body
							div(class="form-group")
								label(for="title") Title
								input(type="text", id="title", name="title", class="form-control")
							div(class="form-group")
								label(for="host") Host
								input(type="text", id="host", name="host", placeholder="eg. 127.0.0.1", class="form-control")
								span :
								input(type="text", id="port", name="port", placeholder="eg.4340", class="form-control")

					.modal-footer
						button.btn.btn-default(type='button', data-dismiss='modal', onClick=("javascript:void(0)")) Close
						button.btn.btn-primary(type='submit') Save changes


	
