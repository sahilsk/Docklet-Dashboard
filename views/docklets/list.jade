extends ../../layouts/layout

block content
	h1= title
	hr

	
	script(type="text/template", id="dockletTemplate").
		<table>
			<thead>
				<tr>
					<th> # </th>
					<th> name </th>
					<th> host </th>
					<th> port </th>
				</tr> 
			</thead>
			<tbody>
				<% 
					_.each(docklets,function(docklet, index) {
						<tr>
							<td> <%= index+1 %> </td>
							<td> <%= docklet.title %> </td>
							<td> <%= docklet.host %> </td>
							<td> <%= docklet.port %> </td>
							<td> 

							</td>
						</tr>	
					})
				%>
			</tbody>

		</table>

	script( type="text/template", id="dockletRowTemplate").
		<tr>
			<td> <%= index %> </td>
			<td> <%= title  %> </td>
			<td> <%= host  %> </td>
			<td> <%= port  %> </td>
			<td> <img src="/images/refreshing_x24.gif", alt="loading..." /> </td>
			<td> <img src="/images/refreshing_x24.gif", alt="loading..." /> </td>
			<td> <img src="/images/refreshing_x24.gif", alt="loading..." /> </td>
			<td>
				<a href="#"   class="label label-primary action-refresh">
					<span class="glyphicon glyphicon-refresh"  data-toggle="tooltip" data-placement="bottom" title="Refresh"> </span>
				</a> &nbsp;
				<a href="#"  class="label label-success action-explore">
					<span class="glyphicon glyphicon-eye-open"> </span>
				</a> &nbsp;
				<a href="#" class="label label-danger action-delete" docker-id="<%= id %>" >
					<span class="glyphicon glyphicon-remove"> </span>
				</a>
			</td>
		</tr>


	script( type="text/template", id="imageTableTemplate").
		<div class="panel panel-default" >
			<div class="panel-heading" >
				<span class="glyphicon glyphicon-list-alt"> </span>
				&nbsp; Images List 
			</div>
			<div class="panel-body table-responsive">
				<table class="table table-striped table-bordered table-responsive">
					<thead>
						<tr>
							<th> # </th>
							<th> ID  </th>
							<th> RepoTags  </th>
							<th> Created  </th>
							<th> Size  </th>
							<th> Virtual Size  </th>
						</tr>
					</thead>
					<tbody>
						<% _.each( images, function(image,index){ %>
							<tr>
								<td> <%= index + 1 %> </td>
								<td> <%= image.Id.substring(0, 14) %>  </td>
								<td> <%= image.RepoTags %> </td>
								<td> <%= image.Created %>  </td>
								<td> <%= image.Size %> </td>
								<td> <%= image.VirtualSize %>  </td>
							</tr>
						<% }) %>

					</tbody>
				</table>
			</div>
		</div>

	script( type="text/template", id="explorePanelTemplate").
		<div class="page-header" id="panel_<%= id %>">
			<h4>Docklet Host: 
				<span class="label label-primary">
					<%= title %> (<%= host %>:<%=port%>)
				<span>
				<small class="label label-default"><%= Version %></small>
			</h4>
			<hr/>
			<div>
					<div >
						<h2 class="text-center"> 
							Monitor Docker Events 
							<fieldset>
								<input type="textbox" class="datepicker" />
								<input type="textbox" class="timepicker" />
								<a href="#"  id="dockerEvents" docker-id="<%= id %>">Start </a>
							</fieldset>
						</h2>
					<div class="pull-right">
						<div class="count pull-right">
							<span> <%= Containers %> </span>
							Container
						</div>
						<div class="count pull-right">
							<span> <%= Images %> </span>
							Images
						</div>	
					</div>						
				
				</div>
				<div class="clearfix"></div>	
			</div>

			<%= imagesTable %>

		</div>


	div(class="panel panel-default")
		div( class="panel-heading ") 
			span(class="glyphicon glyphicon-list-alt")
			|&nbsp; Docklet List
		div.panel-body.table-responsive
			if docklets.length !== 0
				table(class="table table-striped table-bordered", id="dockletsTable")
					thead
						tr
							th #
							th name
							th host
							th port
							th Images
							th containers
							th Memory Limit
							th
								a(href="#" , class="label label-primary") 
										span(class="glyphicon glyphicon-refresh") 
								|&nbsp; 
								a(href="#docklets/new", id="newDocklet",  class="label label-primary")
										span(class="glyphicon glyphicon-plus") 
					tbody
						-each docklet, index in docklets
							tr 
								td
									= index+1
								td
									= docklet.title
								td
									= docklet.host
								td
									= docklet.port
								td
									img(src="/images/refreshing_x24.gif", alt="loading..." )
								td
									img(src="/images/refreshing_x24.gif", alt="loading..." )
								td
									img(src="/images/refreshing_x24.gif", alt="loading..." )
								td
									a(href="#" , class="label label-primary action-refresh", docker-id="#{docklet.id}")
										span(class="glyphicon glyphicon-refresh", data-toggle="tooltip", data-placement="bottom", title="Refresh") 
									|&nbsp;
									a(href="#" , class="label label-success action-explore", docker-id="#{docklet.id}")
										span(class="glyphicon glyphicon-eye-open") 
									|&nbsp;
									a(href="#", class="label label-danger action-delete", docker-id="#{docklet.id}")
										span(class="glyphicon glyphicon-remove")
						tfooter
			else
				div.alert.alert-info.text-center
					|No docklet added yet. 
					a(href="#docklets/new", id="newDocklet", class="btn btn-info	") Add new docklet
	


	.modal.fade#docklets_new
		.modal-dialog
			.modal-content
				div( class="alert  alert-dismissable hidden ", id="actionStatus")
					button(type="button", class="close", data-dismiss="alert", aria-hidden="true") &times; 

				form( id="newDockletForm", method="POST" , action="#docklets/create", role="form")

					.modal-header
						button.close(type='button', data-dismiss='modal', aria-hidden='true') Ã—
						h4.modal-title Add new docklet host
					.modal-body
							div(class="form-group")
								label(for="title") Title
								input(type="text", id="title", name="title", class="form-control")
							div(class="form-group")
								label(for="host") Host
								input(type="text", id="host", name="host", placeholder="eg. 127.0.0.1", class="form-control")
								span :
								input(type="text", id="port", name="port", placeholder="eg.4340", class="form-control")

					.modal-footer
						button.btn.btn-default(type='button', data-dismiss='modal', onClick=("javascript:void(0)")) Close
						button.btn.btn-primary(type='submit') Save changes


	
